package issuetracker;

import issuetracker.clustering.IssueManager;
import issuetracker.clustering.Question;
import issuetracker.db.FirebaseAdapter;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.io.IOException;
import java.util.LinkedList;

public class Runner {

    private static Logger logger = LoggerFactory.getLogger(Runner.class);

    public static void main(String[] args) throws IOException {
        Question q1 = new Question("44330,\"xero-php API, how to structure query\",01/06/2017,Rajiv Pardiwala,2286,\"I'm try to request bank transactions from a specific account from a certain date using the xero-php API.$xero = new PrivateApplication($config);print_r(  $xero->load('Accounting\\BankTransaction')->setParameter('AccountID','XXXXXXX-4097-4028-9b99-XXXXXXXXX')->fromDate(new DateTime('2016-06-01 00:00:00'))->execute());which becomes this:\"\"https://api.xero.com/api.xro/2.0/BankTransactions?AccountID=XXXXXXX-4097-4028-9b99-XXXXXXXXX&fromDate=2016-06-01\"\"however, it is not filtering by AccountID and instead returns transactions for both of my accounts.  The fromDate is ignored as well.  What is the correct url to do what I want?\",https://community.xero.com/developer/discussion/50795838/");
        Question q2 = new Question("44331,Delivery Address on Invoice,31/05/2017,Sam Jones,2286,\"Hi,I am wondering if it is possible to add a Delivery Address to an invoice. We have suppliers with multiple, constantly in use, delivery address. We need to add this address onto the invoice in some way so the supplier knows what address it was for.I know in the docs it states \"\"It is not possible to manually override the address on a per-invoice basis.\"\" but does anyone know a way around this or an alternative solution to record the address on an invoice?ThanksSam\",https://community.xero.com/developer/discussion/50739864/");
        Question q3 = new Question("44332,Getting zero dollar value categories included in Profit and Loss Report,09/05/2017,stu barr,2286,I am having trouble when I GET a Profit and Loss report through the api. It gets all rows that have a dollar value greater then zero but does not include any rows with a zero dollar value. Is it possible to include all rows even if they have a zero dollar value in the profit and loss report? Cheers,https://community.xero.com/developer/discussion/49157379/");
        Question q4 = new Question("44333,Link Manual Journal Entry Transactions to an Invoice or Bill,30/04/2017,Technical Support,2286,\"We are making manual journal entries via the API... This is feeding the income statement and P&L correctly and now we want to link a series of manual journal entries to an Invoice or a Bill. Is there a way to accomplish this? For context... In our case, we provide level-of-effort cost-plus-fixed-fee services so we have one invoice per month containing a series of manual journal entries entered one or more times a day. We are submitting the journal entries via the API since there are too many to do this manually.\",https://community.xero.com/developer/discussion/48619929/");
        Question q5 = new Question("44334,Delete ALL data and start again?,24/04/2017,Steve McKeogh,2286,\"Hi,I know all about the Demo Company account, and I'm aware you can reset this account back to how it was when created, but this account contains loads of data initially that I do not want, so this account is no good for me.So I'm on my trial account, which starts with everything nice and empty (makes my OCD all happy). But whilst doing API calls and filling it with data, we can't (understandably) delete certain data (e.g Auth'd invoices).Is there anyway we can reset a NON demo account back to nothing, I mean delete everything I have created and get it back to blank so I can start fresh and not worry about invoice numbers being taken up during testing?Any help appreciated!Thanks\",https://community.xero.com/developer/discussion/48309065/");
        Question q6 = new Question("44335,\"Hi there,I am unable to login with my login credentials today.Can I know what could be the reason?\",21/04/2017,Sheela Dubey,2286,Is it the server is down?,https://community.xero.com/developer/discussion/48163783/");
        Question q7 = new Question("44336,Invoice,13/04/2017,hardik panchal,2286,\"XeroApi.Model.Contact cn = new XeroApi.Model.Contact();            {                               cn.Name = \"\"Viral1 Chovat1\"\";            }            var test1 = repository.Contacts;            XeroApi.Model.LineItems ln = new XeroApi.Model.LineItems();            {                XeroApi.Model.LineItem ln1 = new XeroApi.Model.LineItem();                {                    ln1.Description = \"\"This is Item1\"\";                    ln1.Quantity = 20;                    ln1.UnitAmount = 100;                    ln1.AccountCode = \"\"1212\"\";                }            }                        XeroApi.Model.Invoice invoice = new XeroApi.Model.Invoice()            {                InvoiceID=Guid.NewGuid(),                InvoiceNumber=\"\"1\"\",                 Type = \"\"ACCREC\"\",                Contact = cn,                LineItems = ln,                Date = DateTime.Now,                DueDate = DateTime.Now,                Status = \"\"AUTHORISED\"\",            };            var createdInvoice = repository.UpdateOrCreate<XeroApi.Model.Invoice>(invoice);            XeroApi.Model.Invoice invoice1 = repository.Create(createdInvoice);found invoice1.validationStatus is Error and cant insert Invoice . Help me\",https://community.xero.com/developer/discussion/47708547/");
        Question q8 = new Question("44337,Private authentication problem,11/04/2017,Mark Henderson,2286,\"I'm trying to intgrate Xero into my c# app using the PrivateAuthenticator from your GitHub page (https://github.com/XeroAPI/Xero-Net/blob/master/Xero.Api.Example.Applications/Private/PrivateAuthenticator.cs) but, no matter what I do, I always get a null reference exception {\"\"Value cannot be null.\\r\\nParameter name: key\"\"} on the line return new RsaSha1Signer().CreateSignature(_certificate, token, uri, verb);In case it's a problem with the certificate I've tried several, generated with different methods (openssl, markecert, several online certificate generators) but I get the same error with every one.My code in full, with most of it being copied directly from GitHub. I call GetContactID() with a dummy ID to test:        public static XeroCoreApi api = null;        public static Contact GetContactID(int customerID)        {            Customer cust = db.Customers.Find(customerID);            if (api == null) Authenticate();            var contacts = api.Contacts.Where(\"\"ContactNumber=\"\" + cust.ExternalID).Find();            return contacts.FirstOrDefault();        }        public static void Authenticate()        {            string key = \"\"{MY KEY}\"\";            string secret = \"\"{MY SECRET}\"\";            api = new XeroCoreApi(\"\"https://api.xero.com\"\",                                   new PrivateAuthenticator(HttpContext.Current.Server.MapPath(\"\"Xero_key.crt\"\")),                                   new Consumer(key, secret),                                   null,                                   new DefaultMapper(),                                   new DefaultMapper());        }    public class PrivateAuthenticator : IAuthenticator    {        private readonly X509Certificate2 _certificate;        public PrivateAuthenticator(string certificatePath)            : this(certificatePath, \"\"\"\")        {        }        public PrivateAuthenticator(string certificatePath, string certificatePassword = \"\"\"\")        {            _certificate = new X509Certificate2();            _certificate.Import(certificatePath, certificatePassword, X509KeyStorageFlags.MachineKeySet);        }        public PrivateAuthenticator(X509Certificate2 certificate)        {            _certificate = certificate;        }        public string GetSignature(IConsumer consumer, IUser user, Uri uri, string verb, IConsumer consumer1)        {            var token = new Token            {                ConsumerKey = consumer.ConsumerKey,                ConsumerSecret = consumer.ConsumerSecret,                TokenKey = consumer.ConsumerKey            };            return new RsaSha1Signer().CreateSignature(_certificate, token, uri, verb);        }        public X509Certificate Certificate { get { return _certificate; } }        public IToken GetToken(IConsumer consumer, IUser user)        {            return null;        }        public IUser User { get; set; }    }I've been struggling with this for the last 8 hours with no success so any help you can give would be very welcome.\",https://community.xero.com/developer/discussion/47581711/");
        Question q9 = new Question("44338,link api to a xero instance,06/04/2017,Bernard Bailey,2286,\"Hi team,I have an api which connects to a developer version of xero and retrieves bank receipts as expected.I now want to point this api to a number of different instances of zero.  When I log into the target instance in xero, I can see the banking transactions, but no place to start the authorisation process for the api.Is the api link only available to certain logins or is it related the level of the zero instance.Your help is appreciated.Bernard\",https://community.xero.com/developer/discussion/47249752/");
        Question q10 = new Question("44339,Xero Interface with PMS system,31/03/2017,Matthew Covert,2286,\"Hi,I just wanted some assistance on getting Xero intergrated with a PMS system that we are using.We are using roomMaster Premier edition (PMS) and would like to get the information from PMS to be pulled into Xero once night audit is done.Would really appreciate some assistance.Thanks,Mat\",https://community.xero.com/developer/discussion/46842661/");

        IssueManager im = new IssueManager(new FirebaseAdapter());
        LinkedList<Question> lq = new LinkedList<>();
        lq.add(q1);
        lq.add(q2);
        lq.add(q3);
        lq.add(q4);
        lq.add(q5);
        lq.add(q6);
        lq.add(q7);
        lq.add(q8);
        lq.add(q9);
        lq.add(q10);

        System.out.println(Question.toARFF(lq));
        im.generateCluster(lq);
    }

}
